name: Check SSH connection

on:
    push:
        branches:
        - main
jobs:
            ssh_login:
              runs-on: ubuntu-latest
              
              steps:
              - name: Check SSH connection
                uses: webfactory/ssh-agent@v0.8.0
                with:
                  ssh-private-key: ${{ secrets.SSH_PRIVATE_KEY }}
              
              - name: SSH Login
                run: |
                  ssh -o PreferredAuthentications=password -o PubkeyAuthentication=no ${{ secrets.SSH_USERNAME }}@${{ secrets.SSH_HOST }} -p 6022